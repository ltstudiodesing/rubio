<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LTSD - LT Studio Design</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        @font-face {
            font-family: 'butler_medium';
            src: url('assets/fonts/butler-medium.woff2') format('woff2'),
                 url('assets/fonts/butler-medium.woff') format('woff');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'butler_medium', 'Times New Roman', serif;
            background: #252525;
            color: white;
            overflow: hidden;
            cursor: none;
        }
        
        /* INTRO SCREEN */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #252525;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 1s ease, transform 1s ease;
        }
        
        #intro-screen.hidden {
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }

        /* TRANSICIÓN FRAGMENTADA SIMPLIFICADA */
        .fragment-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 2000;
            pointer-events: none;
            opacity: 0;
            background: #252525;
        }

        .fragment-overlay.active {
            opacity: 1;
        }

        .fragment {
            position: absolute;
            background: #252525;
            transition: all 1s ease-out;
        }

        .fragment.animate-out {
            transform: translateX(var(--dx)) translateY(var(--dy)) rotate(var(--rotation)) scale(0);
            opacity: 0;
        }
        
        .intro-text {
            font-size: 48px;
            font-weight: 300;
            letter-spacing: 8px;
            text-align: center;
            font-family: 'butler_medium', serif;
        }

        .intro-text .letter {
            display: inline-block;
            color: #444;
            transition: color 0.8s ease;
        }

        .intro-text .letter.filled {
            color: white;
        }
        
        /* PARTICLES */
        #particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.3;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-30px) rotate(120deg); }
            66% { transform: translateY(30px) rotate(240deg); }
        }
        
        /* MAIN SCREEN */
        #main-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            opacity: 0;
            transform: scale(1.2);
            transition: opacity 1s ease, transform 1s ease;
            z-index: 100;
        }

        /* FONDO COMPLETO DE IMAGEN ÚNICA */
        .full-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #252525;
            opacity: 0.6;
            z-index: 0;
            transition: all 1s ease;
        }

        .full-background.active {
            opacity: 0.8;
        }
        
        #main-screen.visible {
            opacity: 1;
            transform: scale(1);
        }

        
        /* LOGO */
        .logo {
            position: fixed;
            top: 30px;
            left: 30px;
            font-size: 24px;
            font-weight: 500;
            letter-spacing: 4px;
            z-index: 200;
            mix-blend-mode: exclusion;
            font-family: 'butler_medium', serif;
        }

        /* NAVEGACIÓN SUPERIOR */
        .top-nav {
            position: fixed;
            top: 30px;
            right: 30px;
            display: flex;
            gap: 30px;
            z-index: 200;
            font-family: 'butler_medium', serif;
        }

        .top-nav-item {
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s ease;
            text-decoration: none;
        }

        .top-nav-item:hover,
        .top-nav-item.active {
            color: white;
        }

        /* MODAL ALL PROJECTS */
        .all-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(37, 37, 37, 0.95);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .all-modal.visible {
            display: flex;
        }

        .modal-content {
            max-width: 1200px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 40px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 300;
            letter-spacing: 2px;
            font-family: 'butler_medium', serif;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .project-card {
            aspect-ratio: 4/3;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .project-card:hover {
            transform: scale(1.05);
        }

        .project-card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            padding: 20px;
            border-radius: 0 0 8px 8px;
        }

        .project-card-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .project-card-location {
            font-size: 14px;
            opacity: 0.7;
        }
        
        /* CIRCLE CONTAINER */
        .circle-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            z-index: 150;
            border-radius: 50%;
            overflow: hidden;
            background: inherit; /* Hereda el fondo de la página */
        }
        
        /* BACKGROUND IMAGES */

        
        /* CIRCLE BORDER */
        .circle-border {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            z-index: 3;
            mix-blend-mode: exclusion;
            transition: border-color 0.3s ease;
        }

        .circle-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            height: 90%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            mix-blend-mode: overlay;
        }

        /* BARRA CIRCULAR DE PROGRESO */
        .circular-progress-bar {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 115%;
            height: 115%;
            z-index: 4;
        }

        .progress-circle-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .progress-circle-bg {
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 2;
            fill: transparent;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .progress-circle-fill {
            stroke: rgba(255, 255, 255, 0.4);
            stroke-width: 2;
            fill: transparent;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dasharray 0.3s ease;
        }

        /* PUNTOS DE PROYECTOS DENTRO DE LA BARRA */
        .project-dots {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .project-dot {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .project-dot.active {
            background: white;
            transform: scale(1.8);
        }
        
        /* PROJECT TEXT */
        .project-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 4;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .project-text.active {
            opacity: 1;
        }
        
        .project-name {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 8px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8);
        }
        
        .project-location {
            font-size: 16px;
            font-weight: 300;
            opacity: 0.8;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.8);
        }
        
        /* NAVIGATION LATERAL */
        .nav-prev {
            position: fixed;
            left: calc(50% - 500px);
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            z-index: 200;
        }

        .nav-next {
            position: fixed;
            right: calc(50% - 500px);
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            z-index: 200;
        }

        .nav-line {
            width: 100px;
            height: 1px;
            background: rgba(255, 255, 255, 0.3);
            margin: 0 20px;
        }

        .nav-button {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            font-weight: 300;
            letter-spacing: 1px;
            cursor: pointer;
            transition: color 0.3s ease;
            font-family: 'butler_medium', serif;
            text-transform: uppercase;
        }

        .nav-button:hover {
            color: white;
        }

        .nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* PROGRESS BAR ABAJO DERECHA */
        .progress-info {
            position: fixed;
            bottom: 50px;
            right: 50px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 200;
            font-family: 'butler_medium', serif;
        }

        .project-number {
            color: white;
            font-size: 16px;
            font-weight: 300;
            min-width: 20px;
        }

        .progress-container {
            width: 80px;
            height: 2px;
            background: rgba(255, 255, 255, 0.2);
        }

        .progress-bar {
            height: 100%;
            background: white;
            width: 0%;
            transition: width 0.1s linear;
        }

        .project-total {
            color: rgba(255, 255, 255, 0.6);
            font-size: 16px;
            font-weight: 300;
        }

        
        /* CURSOR CUSTOM */
        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: exclusion;
            transition: transform 0.1s ease;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .intro-text {
                font-size: 2.5rem;
            }
            
            .circle-container {
                width: 400px;
                height: 400px;
            }
            
            .project-name {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- CURSOR PERSONALIZADO -->
    <div class="custom-cursor" id="cursor"></div>
    
    <!-- INTRO SCREEN -->
    <div id="intro-screen">
        <div id="particles"></div>
        <div class="intro-text"></div>
    </div>

    <!-- TRANSICIÓN FRAGMENTADA -->
    <div class="fragment-overlay" id="fragment-overlay"></div>
    
    <!-- FONDO COMPLETO -->
    <div class="full-background" id="full-bg"></div>

    <!-- MAIN SCREEN -->
    <div id="main-screen">
        <!-- LOGO -->
        <div class="logo">LTSD</div>

        <!-- NAVEGACIÓN SUPERIOR -->
        <div class="top-nav">
            <div class="top-nav-item" onclick="showAllProjects()">all</div>
            <div class="top-nav-item" onclick="showAbout()">about</div>
        </div>
        
        <!-- CÍRCULO INTERACTIVO -->
        <div class="circle-container">
            
            <!-- BORDE DEL CÍRCULO -->
            <div class="circle-border"></div>
            <div class="circle-inner"></div>

            <!-- BARRA CIRCULAR DE PROGRESO -->
            <div class="circular-progress-bar">
                <svg class="progress-circle-container" width="100%" height="100%">
                    <circle class="progress-circle-bg" cx="50%" cy="50%" r="48%"></circle>
                    <circle class="progress-circle-fill" cx="50%" cy="50%" r="48%" id="progress-circle"></circle>
                </svg>
                <div class="project-dots" id="project-dots">
                    <!-- Se generan dinámicamente -->
                </div>
            </div>
            
            <!-- TEXTO DEL PROYECTO -->
            <div class="project-text" data-project="0">
                <div class="project-name">PARK MANSION</div>
                <div class="project-location">Minami Azabu</div>
            </div>
            <div class="project-text" data-project="1">
                <div class="project-name">KAWANA</div>
                <div class="project-location">Silence Kawana</div>
            </div>
            <div class="project-text" data-project="2">
                <div class="project-name">PARK LE JADE</div>
                <div class="project-location">Shirokane Residence</div>
            </div>
            <div class="project-text" data-project="3">
                <div class="project-name">SEVENS VILLA</div>
                <div class="project-location">Karuizawa</div>
            </div>
            <div class="project-text" data-project="4">
                <div class="project-name">HIKAWA GARDENS</div>
                <div class="project-location">Tokyo</div>
            </div>
            <div class="project-text" data-project="5">
                <div class="project-name">ONE AVENUE</div>
                <div class="project-location">Central District</div>
            </div>
            <div class="project-text" data-project="6">
                <div class="project-name">CENTURY FOREST</div>
                <div class="project-location">Urban Integration</div>
            </div>
            <div class="project-text" data-project="7">
                <div class="project-name">PROUD</div>
                <div class="project-location">Rokakoen</div>
            </div>
            <div class="project-text" data-project="8">
                <div class="project-name">NISHIAZABU RESIDENCE</div>
                <div class="project-location">Nishiazabu</div>
            </div>
            <div class="project-text" data-project="9">
                <div class="project-name">ITOHPIA JIYUGAOKA</div>
                <div class="project-location">Jiyugaoka</div>
            </div>
            <div class="project-text" data-project="10">
                <div class="project-name">URBAN VILLA</div>
                <div class="project-location">Central Tokyo</div>
            </div>
            <div class="project-text" data-project="11">
                <div class="project-name">MODERN HOUSE</div>
                <div class="project-location">Shibuya</div>
            </div>
        </div>
        
        <!-- NAVEGACIÓN LATERAL -->
        <div class="nav-prev">
            <button class="nav-button" id="prev-btn" onclick="previousProject()">prev</button>
            <div class="nav-line"></div>
        </div>

        <div class="nav-next">
            <div class="nav-line"></div>
            <button class="nav-button" id="next-btn" onclick="nextProject()">next</button>
        </div>

        <!-- PROGRESO ABAJO DERECHA -->
        <div class="progress-info">
            <div class="project-number" id="current-num">1</div>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div class="project-total">12</div>
        </div>


    </div>

    <!-- MODAL ALL PROJECTS -->
    <div class="all-modal" id="all-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">All Projects</div>
                <button class="close-modal" onclick="closeAllProjects()">×</button>
            </div>
            <div class="projects-grid" id="projects-grid">
                <!-- Se llena dinámicamente -->
            </div>
        </div>
    </div>

    <!-- MODAL ABOUT -->
    <div class="all-modal" id="about-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">About LT Studio Design</div>
                <button class="close-modal" onclick="closeAbout()">×</button>
            </div>
            <div style="line-height: 1.6; opacity: 0.9;">
                <p style="margin-bottom: 20px;">
                    LT Studio Design es un estudio de arquitectura contemporánea que se especializa en crear
                    espacios únicos que combinan funcionalidad, estética y sostenibilidad.
                </p>
                <p style="margin-bottom: 20px;">
                    Nuestro enfoque se centra en entender las necesidades específicas de cada cliente y
                    traducirlas en diseños arquitectónicos innovadores que respetan el entorno y maximizan
                    la experiencia del usuario.
                </p>
                <p style="margin-bottom: 20px;">
                    Cada proyecto es una oportunidad para explorar nuevas formas de habitar el espacio,
                    integrando tecnología avanzada con materiales nobles y técnicas constructivas sostenibles.
                </p>
                <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
                    <strong>Servicios:</strong><br>
                    • Diseño Arquitectónico<br>
                    • Planificación Urbana<br>
                    • Diseño de Interiores<br>
                    • Consultoría en Sostenibilidad<br>
                    • Gestión de Proyectos
                </div>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURACIÓN
        const PROJECTS = [
            {
                name: 'PARK MANSION',
                location: 'Minami Azabu',
                image: 'images/projects/park-mansion/main.jpg',
                duration: 4000
            },
            {
                name: 'KAWANA',
                location: 'Silence Kawana',
                image: 'images/projects/kawana/main.jpg',
                duration: 4000
            },
            {
                name: 'PARK LE JADE',
                location: 'Shirokane Residence',
                image: 'images/projects/park-le-jade/main.jpg',
                duration: 4000
            },
            {
                name: 'SEVENS VILLA',
                location: 'Karuizawa',
                image: 'images/projects/sevens-villa/main.jpg',
                duration: 4000
            },
            {
                name: 'HIKAWA GARDENS',
                location: 'Tokyo',
                image: 'images/projects/hikawa-gardens/main.jpg',
                duration: 4000
            },
            {
                name: 'ONE AVENUE',
                location: 'Central District',
                image: 'images/projects/one-avenue/main.jpg',
                duration: 4000
            },
            {
                name: 'CENTURY FOREST',
                location: 'Urban Integration',
                image: 'images/projects/century-forest/main.jpg',
                duration: 4000
            },
            {
                name: 'PROUD',
                location: 'Rokakoen',
                image: 'images/projects/proud/main.jpg',
                duration: 4000
            },
            {
                name: 'NISHIAZABU RESIDENCE',
                location: 'Nishiazabu',
                image: 'images/projects/nishiazabu-residence/main.jpg',
                duration: 4000
            },
            {
                name: 'ITOHPIA JIYUGAOKA',
                location: 'Jiyugaoka',
                image: 'images/projects/itohpia-jiyugaoka/main.jpg',
                duration: 4000
            },
            {
                name: 'URBAN VILLA',
                location: 'Central Tokyo',
                image: 'images/projects/urban-villa/main.jpg',
                duration: 4000
            },
            {
                name: 'MODERN HOUSE',
                location: 'Shibuya',
                image: 'images/projects/modern-house/main.jpg',
                duration: 4000
            }
        ];
        
        let currentProject = 0;
        let projectTimer = null;
        let progressTimer = null;
        
        // CURSOR PERSONALIZADO
        const cursor = document.getElementById('cursor');
        let isOverCircle = false;

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX - 10 + 'px';
            cursor.style.top = e.clientY - 10 + 'px';
        });

        // INTERACCIÓN CON EL CÍRCULO
        let isDragging = false;
        let dragStartY = 0;
        let dragStartProject = 0;

        function setupCircleInteraction() {
            const circleContainer = document.querySelector('.circle-container');
            const circleBorder = document.querySelector('.circle-border');
            const circleInner = document.querySelector('.circle-inner');

            if (circleContainer) {
                // Hover effects
                circleContainer.addEventListener('mouseenter', () => {
                    isOverCircle = true;
                    cursor.style.transform = 'scale(2)';
                    cursor.style.mixBlendMode = 'exclusion';
                    circleBorder.style.borderColor = 'rgba(255, 255, 255, 0.8)';
                    if (circleInner) {
                        circleInner.style.borderColor = 'rgba(255, 255, 255, 0.2)';
                    }
                });

                circleContainer.addEventListener('mouseleave', () => {
                    isOverCircle = false;
                    cursor.style.transform = 'scale(1)';
                    cursor.style.mixBlendMode = 'difference';
                    circleBorder.style.borderColor = 'rgba(255, 255, 255, 0.4)';
                    if (circleInner) {
                        circleInner.style.borderColor = 'rgba(255, 255, 255, 0.1)';
                    }
                });

                // Drag functionality
                circleContainer.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    dragStartY = e.clientY;
                    dragStartProject = currentProject;
                    circleContainer.style.cursor = 'grabbing';
                    e.preventDefault();
                });

                document.addEventListener('mousemove', (e) => {
                    if (isDragging && isOverCircle) {
                        const deltaY = e.clientY - dragStartY;
                        const sensitivity = 50; // px needed to change project
                        const projectChange = Math.floor(deltaY / sensitivity);

                        let newProject = dragStartProject + projectChange;
                        newProject = Math.max(0, Math.min(PROJECTS.length - 1, newProject));

                        if (newProject !== currentProject) {
                            changeProject(newProject);
                        }
                    }
                });

                document.addEventListener('mouseup', () => {
                    if (isDragging) {
                        isDragging = false;
                        circleContainer.style.cursor = '';
                        // Restart progress after drag
                        setTimeout(() => {
                            startProgress();
                        }, 500);
                    }
                });
            }
        }
        
        // TRANSICIÓN FRAGMENTADA SIMPLIFICADA
        function startFragmentTransition() {
            console.log('🌟 Iniciando transición fragmentada');

            const introScreen = document.getElementById('intro-screen');
            const mainScreen = document.getElementById('main-screen');

            // Transición suave sin fragmentos complejos
            introScreen.style.transition = 'opacity 1s ease-out, transform 1s ease-out';
            introScreen.style.opacity = '0';
            // ¡NO MÁS SCALE! Solo opacity

            setTimeout(() => {
                // Ocultar intro completamente
                introScreen.classList.add('hidden');
                introScreen.style.display = 'none';

                // Mostrar main screen
                mainScreen.classList.add('visible');
                mainScreen.style.opacity = '1';
                mainScreen.style.transform = 'scale(1)';

                console.log('✅ Transición completada - Main screen visible');

                // Inicializar main screen después de la transición
                setTimeout(() => {
                    changeProject(0);
                    startProgress();
                    console.log('✅ Main screen inicializado con proyecto 0');
                }, 300);
            }, 1000);
        }

        // CREAR PARTÍCULAS
        function createParticles() {
            const particlesContainer = document.getElementById('particles');

            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = (Math.random() * 4 + 1) + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';

                particlesContainer.appendChild(particle);
            }
        }

        // ANIMAR TEXTO LETRA POR LETRA
        function animateIntroText() {
            console.log('📝 Iniciando animación de texto intro');
            const introText = document.querySelector('.intro-text');
            const text = 'LT STUDIO DESIGN';

            if (!introText) {
                console.error('❌ No se encontró .intro-text');
                return;
            }

            introText.innerHTML = '';

            // Crear spans para cada letra
            const letters = [];
            text.split('').forEach((letter, index) => {
                const span = document.createElement('span');
                span.className = 'letter';
                span.textContent = letter === ' ' ? '\u00A0' : letter;
                introText.appendChild(span);
                letters.push(span);
            });

            console.log(`📝 Creadas ${letters.length} letras`);

            // Animar letra por letra de gris a blanco
            letters.forEach((letter, index) => {
                setTimeout(() => {
                    letter.classList.add('filled');
                    console.log(`📝 Letra ${index + 1} animada`);

                    // Si es la última letra, hacer EXPLOSIÓN ESPECTACULAR
                    if (index === letters.length - 1) {
                        console.log('🎯 Última letra completada, programando EXPLOSIÓN MEGA ESPECTACULAR');
                        setTimeout(() => {
                            console.log('💥 EXPLOSIÓN MEGA ESPECTACULAR INCOMING!');

                            // CREAR EXPLOSIÓN DIRECTA AQUÍ
                            const introScreen = document.getElementById('intro-screen');
                            const mainScreen = document.getElementById('main-screen');

                            // EXPLOTAR CADA LETRA CON DELAY
                            letters.forEach((letter, i) => {
                                setTimeout(() => {
                                    console.log(`💥 Explosión letra ${i}`);

                                    // 3 copias volando por letra
                                    for (let j = 0; j < 3; j++) {
                                        const flying = letter.cloneNode(true);
                                        flying.style.position = 'fixed';
                                        flying.style.zIndex = '10000';
                                        flying.style.fontSize = '2rem';
                                        flying.style.fontWeight = 'bold';
                                        flying.style.color = '#fff';
                                        flying.style.pointerEvents = 'none';

                                        // Posición inicial igual a la letra original
                                        const rect = letter.getBoundingClientRect();
                                        flying.style.left = rect.left + 'px';
                                        flying.style.top = rect.top + 'px';

                                        document.body.appendChild(flying);

                                        // Animación de vuelo
                                        const angle = (Math.PI * 2 * j / 3) + (Math.random() * 0.5);
                                        const distance = 300 + Math.random() * 400;
                                        const endX = rect.left + Math.cos(angle) * distance;
                                        const endY = rect.top + Math.sin(angle) * distance;

                                        flying.style.transition = 'all 2s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                                        flying.style.transform = `translate(${endX - rect.left}px, ${endY - rect.top}px) rotate(${360 * 3}deg) scale(${0.1 + Math.random() * 0.3})`;
                                        flying.style.opacity = '0';

                                        // Limpiar después de la animación
                                        setTimeout(() => {
                                            if (flying.parentNode) {
                                                flying.parentNode.removeChild(flying);
                                            }
                                        }, 2000);
                                    }

                                    // Ocultar letra original con efecto
                                    letter.style.transition = 'all 0.5s ease-out';
                                    letter.style.transform = 'scale(0)';
                                    letter.style.opacity = '0';

                                }, 0); // Todas explotan simultáneamente
                            });

                            // Después de 4 segundos, hacer transición final
                            setTimeout(() => {
                                console.log('🌟 Completando transición a main screen');
                                introScreen.style.transition = 'opacity 1s ease-out';
                                introScreen.style.opacity = '0';

                                setTimeout(() => {
                                    introScreen.classList.add('hidden');
                                    introScreen.style.display = 'none';

                                    mainScreen.classList.add('visible');
                                    mainScreen.style.opacity = '1';

                                    // Inicializar main screen
                                    setTimeout(() => {
                                        changeProject(0);
                                        startProgress();
                                        console.log('�� Main screen inicializado');
                                    }, 300);
                                }, 1000);
                            }, 4000);

                        }, 2000); // 2 segundos después de que termine la última letra
                    }
                }, index * 150); // 150ms entre letras para mejor visualización
            });
        }
        
        // INICIALIZAR PRIMERA IMAGEN DE FONDO
        function initProjectImages() {
            console.log(`🖼️ Inicializando imagen de fondo única`);

            // Configurar primera imagen
            if (PROJECTS[0]) {
                updateBackgroundImage(0);
            }
        }

        // ACTUALIZAR IMAGEN DE FONDO
        function updateBackgroundImage(index) {
            const fullBg = document.getElementById('full-bg');
            if (fullBg && PROJECTS[index]) {
                const localImageUrl = PROJECTS[index].image;
                const timestamp = Date.now();

                const img = new Image();
                img.onload = () => {
                    console.log(`📥 Imagen local cargada: ${PROJECTS[index].name}`);
                    fullBg.style.backgroundImage = `url("${localImageUrl}?cache=${timestamp}")`;
                    fullBg.classList.remove('active');
                    setTimeout(() => {
                        fullBg.classList.add('active');
                    }, 100);
                };
                img.onerror = () => {
                    console.log(`❌ Imagen local no encontrada, usando imagen temporal`);
                    // Fallback a imagen temporal de picsum
                    const fallbackSeeds = ['park-mansion', 'kawana', 'park-le-jade', 'sevens-villa', 'hikawa-gardens',
                                          'one-avenue', 'century-forest', 'proud', 'nishiazabu', 'itohpia', 'urban-villa', 'modern-house'];
                    const fallbackUrl = `https://picsum.photos/seed/${fallbackSeeds[index]}/600/600`;
                    fullBg.style.backgroundImage = `url("${fallbackUrl}")`;
                    fullBg.classList.remove('active');
                    setTimeout(() => {
                        fullBg.classList.add('active');
                    }, 100);
                };
                img.src = localImageUrl;
            }
        }
        
        // CAMBIAR PROYECTO
        function changeProject(index) {
            // Limpiar intervalos
            if (progressTimer) clearInterval(progressTimer);

            // Ocultar proyecto actual
            document.querySelectorAll('.project-text').forEach(text => {
                text.classList.remove('active');
            });

            // Mostrar nuevo proyecto
            const newText = document.querySelector(`.project-text[data-project="${index}"]`);

            if (newText) newText.classList.add('active');

            // Actualizar imagen de fondo única
            updateBackgroundImage(index);

            currentProject = index;

            // Actualizar contador
            document.getElementById('current-num').textContent = (index + 1).toString();

            // Actualizar indicador de proyectos
            updateProjectIndicator(index);

            // Actualizar botones de navegación
            document.getElementById('prev-btn').disabled = (index === 0);
            document.getElementById('next-btn').disabled = (index === PROJECTS.length - 1);

            console.log(`✅ Proyecto cambiado a: ${PROJECTS[index].name}`);
        }
        
        // INICIAR BARRA DE PROGRESO
        // CONFIGURACIÓN DE INDICADOR DE PROYECTOS
        function setupProjectIndicator() {
            const progressCircle = document.getElementById('progress-circle');
            const dotsContainer = document.getElementById('project-dots');

            // Configurar círculo de progreso
            if (progressCircle) {
                const radius = progressCircle.r.baseVal.value;
                const circumference = 2 * Math.PI * radius;
                progressCircle.style.strokeDasharray = circumference;
                progressCircle.style.strokeDashoffset = circumference;
            }

            // Configurar puntos de proyectos
            if (dotsContainer) {
                dotsContainer.innerHTML = '';

                // Crear puntos para cada proyecto alrededor del círculo
                PROJECTS.forEach((project, index) => {
                    const dot = document.createElement('div');
                    dot.className = 'project-dot';
                    dot.dataset.project = index;

                    // Calcular posición alrededor del círculo
                    const angle = (index / PROJECTS.length) * 360 - 90; // -90 para empezar arriba
                    const radian = (angle * Math.PI) / 180;
                    const radius = 50; // porcentaje del contenedor

                    const x = 50 + radius * Math.cos(radian);
                    const y = 50 + radius * Math.sin(radian);

                    dot.style.left = x + '%';
                    dot.style.top = y + '%';
                    dot.style.transform = 'translate(-50%, -50%)';

                    dotsContainer.appendChild(dot);
                });

                // Activar el primer punto
                updateProjectIndicator(0);
            }
        }

        // ACTUALIZAR INDICADOR DE PROYECTOS
        function updateProjectIndicator(activeIndex) {
            const dots = document.querySelectorAll('.project-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === activeIndex);
            });

            // Actualizar barra circular de progreso
            const progressCircle = document.getElementById('progress-circle');
            if (progressCircle) {
                const progress = (activeIndex + 1) / PROJECTS.length;
                const radius = progressCircle.r.baseVal.value;
                const circumference = 2 * Math.PI * radius;
                const offset = circumference - (progress * circumference);
                progressCircle.style.strokeDashoffset = offset;
            }
        }

        function startProgress() {
            const progressBar = document.getElementById('progress-bar');
            const duration = PROJECTS[currentProject].duration;
            let progress = 0;

            progressBar.style.width = '0%';

            const increment = 100 / (duration / 50); // 50ms intervals

            progressTimer = setInterval(() => {
                progress += increment;
                progressBar.style.width = progress + '%';

                if (progress >= 100) {
                    clearInterval(progressTimer);
                    autoNextProject();
                }
            }, 50);
        }
        
        // SIGUIENTE PROYECTO
        function nextProject() {
            if (currentProject < PROJECTS.length - 1) {
                changeProject(currentProject + 1);
                startProgress();
            }
        }

        // PROYECTO ANTERIOR
        function previousProject() {
            if (currentProject > 0) {
                changeProject(currentProject - 1);
                startProgress();
            }
        }

        // AUTO NEXT (para progreso automático)
        function autoNextProject() {
            const nextIndex = (currentProject + 1) % PROJECTS.length;
            changeProject(nextIndex);
            startProgress();
        }
        
        // INICIALIZAR APLICACIÓN
        function initApp() {
            console.log('🚀 Inicializando aplicación LTSD');

            // Asegurar que intro esté visible y main oculto
            const introScreen = document.getElementById('intro-screen');
            const mainScreen = document.getElementById('main-screen');

            if (introScreen) {
                introScreen.classList.remove('hidden');
                introScreen.style.opacity = '1';
                introScreen.style.transform = 'scale(1)';
                console.log('✅ Intro screen visible');
            }

            if (mainScreen) {
                mainScreen.classList.remove('visible');
                mainScreen.style.opacity = '0';
                console.log('✅ Main screen oculto');
            }

            // Crear partículas
            createParticles();

            // Animar texto intro (incluye transición automática)
            setTimeout(() => {
                animateIntroText();
            }, 500); // Pequeño delay para asegurar que todo esté listo

            // Inicializar imágenes
            initProjectImages();

            // Configurar interacción del círculo
            setupCircleInteraction();

            // Configurar indicador de proyectos
            setupProjectIndicator();
        }
        
        // FUNCIONES DE MODAL
        function showAllProjects() {
            const modal = document.getElementById('all-modal');
            const grid = document.getElementById('projects-grid');

            // Limpiar grid
            grid.innerHTML = '';

            // Crear cards para cada proyecto
            PROJECTS.forEach((project, index) => {
                const card = document.createElement('div');
                card.className = 'project-card';
                card.style.backgroundImage = `url("${project.image}")`;
                card.onclick = () => goToProject(index);

                card.innerHTML = `
                    <div class="project-card-overlay">
                        <div class="project-card-title">${project.name}</div>
                        <div class="project-card-location">${project.location}</div>
                    </div>
                `;

                grid.appendChild(card);
            });

            modal.classList.add('visible');
        }

        function closeAllProjects() {
            document.getElementById('all-modal').classList.remove('visible');
        }

        function showAbout() {
            document.getElementById('about-modal').classList.add('visible');
        }

        function closeAbout() {
            document.getElementById('about-modal').classList.remove('visible');
        }

        function goToProject(index) {
            // Usar índice para crear URLs consistentes
            const projectUrls = [
                'projects/park-mansion-nuevo.html',
                'projects/kawana-nuevo.html',
                'projects/park-mansion-nuevo.html', // placeholder
                'projects/kawana-nuevo.html', // placeholder
                'projects/park-mansion-nuevo.html', // placeholder
                'projects/kawana-nuevo.html', // placeholder
                'projects/park-mansion-nuevo.html', // placeholder
                'projects/kawana-nuevo.html', // placeholder
                'projects/park-mansion-nuevo.html', // placeholder
                'projects/kawana-nuevo.html', // placeholder
                'projects/park-mansion-nuevo.html', // placeholder
                'projects/kawana-nuevo.html' // placeholder
            ];

            window.location.href = projectUrls[index] || 'projects/park-mansion-nuevo.html';
        }

        // CLICKS EN PROYECTOS (NAVEGACIÓN A PÁGINAS INDIVIDUALES)
        document.addEventListener('click', (e) => {
            if (e.target.closest('.circle-container')) {
                goToProject(currentProject);
            }
        });
        
        // INICIAR CUANDO LA PÁGINA CARGUE
        console.log('🔄 Registrando DOMContentLoaded listener');
        document.addEventListener('DOMContentLoaded', () => {
            console.log('📱 DOM Content Loaded - iniciando app');
            initApp();
        });

        // Backup en caso de que DOMContentLoaded ya haya pasado
        if (document.readyState === 'loading') {
            console.log('⏳ DOM still loading, waiting for DOMContentLoaded');
        } else {
            console.log('⚡ DOM already loaded, iniciando inmediatamente');
            setTimeout(initApp, 100);
        }

        console.log('🎉 LTSD App script cargado completamente');
    </script>
</body>
</html>
